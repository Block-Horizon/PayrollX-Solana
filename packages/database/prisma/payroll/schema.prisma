// This is your Prisma schema file for the Payroll service
// Learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../../dist/prisma/payroll"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model PayrollRun {
  id               String        @id @default(uuid())
  organizationId   String
  name             String?
  payPeriodStart   DateTime
  payPeriodEnd     DateTime
  payDate          DateTime
  totalAmount      Decimal
  currency         String        @default("USD")
  status           String        @default("DRAFT")
  createdBy        String
  createdAt        DateTime      @default(now())
  updatedAt        DateTime      @updatedAt

  // Relations
  items            PayrollItem[]

  @@map("payroll_runs")
}

model PayrollItem {
  id            String   @id @default(uuid())
  payrollRunId  String
  employeeId    String
  grossAmount   Decimal
  deductions    Decimal?
  bonuses       Decimal?
  netAmount     Decimal
  status        String   @default("PENDING")
  transactionId String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  // Relations
  payrollRun PayrollRun @relation(fields: [payrollRunId], references: [id], onDelete: Cascade)

  @@map("payroll_items")
}